"use strict";(self["webpackChunkaw_webui"]=self["webpackChunkaw_webui"]||[]).push([[753,96],{97096:(t,e,i)=>{i.r(e),i.d(e,{default:()=>v});let r={};const n={name:"fa-icon",props:{name:{type:String,validator(t){return!t||t in r||(console.warn(`Invalid prop: prop "name" is referring to an unregistered icon "${t}".\nPlease make sure you have imported this icon before using it.`),!1)}},title:String,scale:[Number,String],spin:Boolean,inverse:Boolean,pulse:Boolean,flip:{validator(t){return"horizontal"===t||"vertical"===t}},label:String,tabindex:[Number,String]},data(){return{id:o(),x:!1,y:!1,childrenWidth:0,childrenHeight:0,outerScale:1}},computed:{normalizedScale(){let t=this.scale;return t="undefined"===typeof t?1:Number(t),isNaN(t)||t<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.',this),this.outerScale):t*this.outerScale},klass(){return{"fa-icon":!0,"fa-spin":this.spin,"fa-flip-horizontal":"horizontal"===this.flip,"fa-flip-vertical":"vertical"===this.flip,"fa-inverse":this.inverse,"fa-pulse":this.pulse,[this.$options.name]:!0}},icon(){return this.name?r[this.name]:null},box(){return this.icon?`0 0 ${this.icon.width} ${this.icon.height}`:`0 0 ${this.width} ${this.height}`},ratio(){if(!this.icon)return 1;let{width:t,height:e}=this.icon;return Math.max(t,e)/16},width(){return this.childrenWidth||this.icon&&this.icon.width/this.ratio*this.normalizedScale||0},height(){return this.childrenHeight||this.icon&&this.icon.height/this.ratio*this.normalizedScale||0},style(){return 1!==this.normalizedScale&&{fontSize:this.normalizedScale+"em"}},raw(){if(!this.icon||!this.icon.raw)return null;let t=this.icon.raw,e={};return t=t.replace(/\s(?:xml:)?id=(["']?)([^"')\s]+)\1/g,((t,i,r)=>{let n=o();return e[r]=n,` id="${n}"`})),t=t.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,((t,i,r,n)=>{let s=i||n;return s&&e[s]?`#${e[s]}`:t})),t},focusable(){let{tabindex:t}=this;if(null==t)return"false";let e="string"===typeof t?parseInt(t,10):t;return e>=0?null:"false"}},mounted(){this.updateStack()},updated(){this.updateStack()},methods:{updateStack(){if(!this.name&&null!==this.name&&0===this.$children.length)return void console.warn('Invalid prop: prop "name" is required.');if(this.icon)return;let t=0,e=0;this.$children.forEach((i=>{i.outerScale=this.normalizedScale,t=Math.max(t,i.width),e=Math.max(e,i.height)})),this.childrenWidth=t,this.childrenHeight=e,this.$children.forEach((i=>{i.x=(t-i.width)/2,i.y=(e-i.height)/2}))}},render(t){if(null===this.name)return t();let e={class:this.klass,style:this.style,attrs:{role:this.$attrs.role||(this.label||this.title?"img":null),"aria-label":this.label||null,"aria-hidden":String(!(this.label||this.title)),tabindex:this.tabindex,x:this.x,y:this.y,width:this.width,height:this.height,viewBox:this.box,focusable:this.focusable}},i=`vat-${this.id}`;if(this.title&&(e.attrs["aria-labelledby"]=i),this.raw){let t=this.raw;this.title&&(t=`<title id="${i}">${h(this.title)}</title>${t}`),e.domProps={innerHTML:t}}let r=this.title?[t("title",{attrs:{id:i}},this.title)]:[];return t("svg",e,this.raw?null:r.concat(this.$slots.default||[...this.icon.paths.map(((e,i)=>t("path",{attrs:e,key:`path-${i}`}))),...this.icon.polygons.map(((e,i)=>t("polygon",{attrs:e,key:`polygon-${i}`})))]))},register(t){for(let e in t){let i=t[e],{paths:n=[],d:a,polygons:o=[],points:l}=i;a&&n.push({d:a}),l&&o.push({points:l}),r[e]=s({},i,{paths:n,polygons:o})}},icons:r};function s(t,...e){return e.forEach((e=>{for(let i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})),t}let a=870711;function o(){return`va-${(a++).toString(16)}`}const l={"<":"&lt;",">":"&gt;",'"':"&quot;","&":"&amp;"};function h(t){return t.replace(/[<>"&]/g,(t=>l[t]||t))}const c=n;var u,d,p=i(1001),f=(0,p.Z)(c,u,d,!1,null,null,null);const v=f.exports},20753:(t,e,i)=>{i.r(e),i.d(e,{default:()=>m});var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("h3",[t._v("Report")]),t._v("Generate a report of time spent on a certain category of device activity."),i("b-alert",{staticClass:"mt-2",staticStyle:{},attrs:{show:""}},[t._v("This feature is still in early development.")]),t.error?i("b-alert",{attrs:{show:"",variant:"danger"}},[t._v(t._s(t.error))]):t._e(),i("aw-select-categories-or-pattern",{scopedSlots:t._u([{key:"input-group-append",fn:function(){return[i("b-button",{attrs:{type:"button",variant:"success",disabled:!t.has_pattern},on:{click:function(e){return t.generate()}}},[i("icon",{attrs:{name:"search"}}),t._v("Generate")],1)]},proxy:!0}]),model:{value:t.filterCategories,callback:function(e){t.filterCategories=e},expression:"filterCategories"}}),i("div",{staticClass:"d-flex mt-1"},[i("span",{staticClass:"mr-auto small",staticStyle:{color:"#666"}},[t._v("Hostname: "+t._s(t.queryOptions.hostname))]),i("b-button",{staticStyle:{border:"0"},attrs:{size:"sm",variant:"outline-dark"},on:{click:function(e){t.show_options=!t.show_options}}},[t.show_options?i("span",[i("icon",{attrs:{name:"angle-double-up"}}),t._v(" Hide options")],1):i("span",[i("icon",{attrs:{name:"angle-double-down"}}),t._v(" Show options")],1)])],1),i("div",{directives:[{name:"show",rawName:"v-show",value:t.show_options,expression:"show_options"}]},[i("h4",[t._v("Options")]),i("aw-query-options",{model:{value:t.queryOptions,callback:function(e){t.queryOptions=e},expression:"queryOptions"}})],1),"searching"==t.status?i("div",[i("div",[i("icon",{attrs:{name:"spinner",pulse:""}}),t._v(" Searching...")],1)]):t._e(),null!=t.events?i("div",[i("vis-timeline",{attrs:{events:t.events,filterShortEvents:""}}),i("div",[t._v(t._s(t.events.length)+" events")]),i("hr"),i("aw-timeline-barchart",{attrs:{datasets:t.datasets,height:100}}),i("hr"),i("aw-selectable-eventview",{attrs:{events:t.events}}),i("div",[t._v("Didn't find what you were looking for?"),i("br"),t._v("Add a week to the search: "),i("b-button",{attrs:{size:"sm",variant:"outline-dark"},on:{click:function(e){t.start=t.start.subtract(1,"week"),t.search()}}},[t._v("+1 week")])],1)],1):t._e()],1)},n=[],s=i(63360),a=i(75472),o=i.n(a),l=(i(21249),i(74916),i(23123),i(73210),i(35666),i(30381)),h=i.n(l),c=i(78050),u=i(79970);i(42834),i(72584),i(88099),i(19403);const d={name:"Report",data:function(){return{events:null,status:null,error:"",show_options:!1,queryOptions:{},filterCategories:[]}},computed:{has_pattern:function(){return this.filterCategories.length>0},datasets:function(){return(0,u.P)(this.$store,this.$store.state.activity.category.by_period,this.$store.state.activity.active.events,this.$store.state.categories.classes)}},mounted:function(){var t=(0,s.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("buckets/ensureBuckets");case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{generate:function(){var t=(0,s.Z)(regeneratorRuntime.mark((function t(){var e,i,r,n,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=(0,c.l8)({bid_window:"aw-watcher-window_"+this.queryOptions.hostname,bid_afk:"aw-watcher-afk_"+this.queryOptions.hostname,filter_afk:this.queryOptions.filter_afk,classes:this.filterCategories,filter_classes:this.filterCategories.map((function(t){return t[0]}))}),e+="; RETURN = events;",i=e.split(";").map((function(t){return t.trim()+";"})),r=h()(this.queryOptions.start).format(),n=h()(this.queryOptions.stop).format(),s=[r+"/"+n],t.prev=6,this.status="searching",t.next=10,this.$aw.query(s,i);case 10:a=t.sent,this.events=o()(a[0],["timestamp"],["desc"]),this.error="",t.next=19;break;case 15:t.prev=15,t.t0=t["catch"](6),console.error(t.t0),this.error=t.t0.response.data.message;case 19:return t.prev=19,this.status=null,t.finish(19);case 22:case"end":return t.stop()}}),t,this,[[6,15,19,22]])})));function e(){return t.apply(this,arguments)}return e}()}},p=d;var f=i(1001),v=(0,f.Z)(p,r,n,!1,null,"1bf98c7f",null);const m=v.exports},79970:(t,e,i)=>{i.d(e,{P:()=>o});var r=i(57611),n=i(18446),s=i.n(n);i(41539),i(70189),i(78783),i(33948),i(84944),i(33792),i(21249),i(26833),i(69600),i(57327),i(74916),i(23123),i(69826),i(68309),i(96026),i(30381),i(69409);var a=i(53167);function o(t,e,i){var n=">>>",o=e;if(o){var l=new Set(Object.values(o).map((function(t){return t.cat_events.map((function(t){return t.data["$category"].join(n)}))})).flat()),h=(0,r.Z)(l).map((function(e){var r=t.getters["categories/get_category"](e.split(n));if(r){var l=Object.values(o).map((function(t){var e=t.cat_events.find((function(t){return s()(t.data["$category"],r.name)}));return e?Math.round(e.duration/3600*1e3)/1e3:null}));return{label:r.name.join(" > "),backgroundColor:(0,a.getColorFromCategory)(r,i),data:l}}console.error("missing category:",e)})).filter((function(t){return t}));return h}return[]}},88099:(t,e,i)=>{var r=i(97096);r["default"].register({"angle-double-down":{width:320,height:512,paths:[{d:"M143 256.3l-136-136c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.8 22.5c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.4 9.5-24.6 9.5-34 0.1zM177 448.3c-9.4 9.4-24.6 9.4-34-0.1l-136-136c-9.4-9.3-9.4-24.5 0-33.9l22.7-22.6c9.3-9.4 24.5-9.4 33.9 0l96.4 96.4 96.5-96.3c9.3-9.4 24.5-9.4 33.9 0l22.6 22.6c9.4 9.3 9.4 24.5 0 33.9z"}]}})},19403:(t,e,i)=>{var r=i(97096);r["default"].register({"angle-double-up":{width:320,height:512,paths:[{d:"M177 255.7l136 136c9.4 9.4 9.4 24.6 0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9 0l-96.5-96.3-96.4 96.4c-9.4 9.4-24.6 9.4-33.9 0l-22.7-22.6c-9.4-9.4-9.4-24.6 0-33.9l136-136c9.4-9.5 24.6-9.5 34-0.1zM143 63.7c9.4-9.4 24.6-9.4 33.8 0l136 136c9.4 9.3 9.4 24.5 0 33.9l-22.6 22.6c-9.3 9.4-24.5 9.4-33.9 0l-96.4-96.4-96.4 96.4c-9.3 9.4-24.5 9.4-33.9 0l-22.6-22.6c-9.4-9.3-9.4-24.5 0-33.9z"}]}})},42834:(t,e,i)=>{var r=i(97096);r["default"].register({search:{width:512,height:512,paths:[{d:"M505 442.7c9.3 9.4 9.3 24.6-0.1 34l-28.3 28.3c-9.3 9.4-24.5 9.4-33.9 0l-99.7-99.7c-4.5-4.5-7-10.6-7-17v-16.3c-35.3 27.6-79.7 44-128 44-114.9 0-208-93.1-208-208s93.1-208 208-208 208 93.1 208 208c0 48.3-16.4 92.7-44 128h16.3c6.4 0 12.5 2.5 17 7zM208 336c70.8 0 128-57.3 128-128 0-70.8-57.3-128-128-128-70.8 0-128 57.3-128 128 0 70.8 57.3 128 128 128z"}]}})},72584:(t,e,i)=>{var r=i(97096);r["default"].register({spinner:{width:512,height:512,paths:[{d:"M304 48c0 26.5-21.5 48-48 48s-48-21.5-48-48 21.5-48 48-48 48 21.5 48 48zM256 416c26.5 0 48 21.5 48 48s-21.5 48-48 48-48-21.5-48-48 21.5-48 48-48zM464 208c26.5 0 48 21.5 48 48s-21.5 48-48 48-48-21.5-48-48 21.5-48 48-48zM96 256c0 26.5-21.5 48-48 48s-48-21.5-48-48 21.5-48 48-48 48 21.5 48 48zM108.9 355.1c26.5 0 48 21.5 48 48 0 26.5-21.5 48-48 48s-48-21.5-48-48 21.5-48 48-48zM403.1 355.1c26.5 0 48 21.5 48 48 0 26.5-21.5 48-48 48s-48-21.5-48-48 21.5-48 48-48zM108.9 60.9c26.5 0 48 21.5 48 48s-21.5 48-48 48-48-21.5-48-48 21.5-48 48-48z"}]}})},57611:(t,e,i)=>{i.d(e,{Z:()=>l});i(79753);var r=i(93002);function n(t){if(Array.isArray(t))return(0,r.Z)(t)}i(82526),i(41817),i(41539),i(32165),i(78783),i(33948),i(91038);function s(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var a=i(91449);i(21703),i(96647);function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(t){return n(t)||s(t)||(0,a.Z)(t)||o()}}}]);
//# sourceMappingURL=753.b6b4d560.js.map