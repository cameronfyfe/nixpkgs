"use strict";(self["webpackChunkaw_webui"]=self["webpackChunkaw_webui"]||[]).push([[734],{11734:(e,t,r)=>{r.r(t),r.d(t,{default:()=>p});var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h3",[e._v("Query Explorer")]),e._v("See "),r("a",{attrs:{href:"https://docs.activitywatch.net/en/latest/examples/querying-data.html"}},[e._v("the documentation")]),e._v(" for help on how to write queries."),r("hr"),e.error?r("div",{staticClass:"alert alert-danger"},[e._v(e._s(e.error))]):e._e(),r("form",[r("div",{staticClass:"form-row"},[r("div",{staticClass:"form-group col-md-6"},[e._v("Start"),r("input",{directives:[{name:"model",rawName:"v-model",value:e.startdate,expression:"startdate"}],staticClass:"form-control",attrs:{type:"date",max:e.today},domProps:{value:e.startdate},on:{input:function(t){t.target.composing||(e.startdate=t.target.value)}}})]),r("div",{staticClass:"form-group col-md-6"},[e._v("End"),r("input",{directives:[{name:"model",rawName:"v-model",value:e.enddate,expression:"enddate"}],staticClass:"form-control",attrs:{type:"date",max:e.tomorrow},domProps:{value:e.enddate},on:{input:function(t){t.target.composing||(e.enddate=t.target.value)}}})])]),r("div",{staticClass:"form-group"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.query_code,expression:"query_code"}],staticClass:"form-control",staticStyle:{"font-family":"monospace"},attrs:{rows:"4"},domProps:{value:e.query_code},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?e.query():null},input:function(t){t.target.composing||(e.query_code=t.target.value)}}})]),r("div",{staticClass:"form-inline"},[r("div",{staticClass:"form-group"},[r("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(t){return e.query()}}},[e._v("Query")])]),r("span",{staticStyle:{"padding-left":"1em"}}),e._v(e._s(e.eventcount_str))])]),r("hr"),r("aw-selectable-eventview",{attrs:{events:e.events,event_type:e.event_type}})],1)},n=[],s=r(63360),o=(r(35666),r(79753),r(21249),r(74916),r(23123),r(73210),r(30381)),i=r.n(o),u=i()().startOf("day"),d=i()(u).add(24,"hours");const c={name:"QueryExplorer",data:function(){return{query_code:'afk_events = query_bucket(find_bucket("aw-watcher-afk_"));\nwindow_events = query_bucket(find_bucket("aw-watcher-window_"));\nwindow_events = filter_period_intersect(window_events, filter_keyvals(afk_events, "status", ["not-afk"]));\nmerged_events = merge_events_by_keys(window_events, ["app", "title"]);\nRETURN = sort_by_duration(merged_events);',event_type:"currentwindow",events:[],today:u.format(),tomorrow:d.format(),error:"",startdate:u.format("YYYY-MM-DD"),enddate:d.format("YYYY-MM-DD")}},computed:{eventcount_str:function(){return Array.isArray(this.events)?"Number of events: "+this.events.length:""}},methods:{query:function(){var e=(0,s.Z)(regeneratorRuntime.mark((function e(){var t,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.query_code.split(";").map((function(e){return e.trim()+";"})),r=[i()(this.startdate).format()+"/"+i()(this.enddate).format()],e.prev=2,e.next=5,this.$aw.query(r,t);case 5:a=e.sent,this.events=a[0],this.error="",e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2),this.error=e.t0.response.data.message;case 13:case"end":return e.stop()}}),e,this,[[2,10]])})));function t(){return e.apply(this,arguments)}return t}()}},l=c;var v=r(1001),m=(0,v.Z)(l,a,n,!1,null,"6844470e",null);const p=m.exports}}]);
//# sourceMappingURL=734.e675d5f5.js.map