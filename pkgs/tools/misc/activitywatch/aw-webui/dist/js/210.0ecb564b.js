"use strict";(self["webpackChunkaw_webui"]=self["webpackChunkaw_webui"]||[]).push([[210],{18210:(t,e,r)=>{r.r(e),r.d(e,{default:()=>p});var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("h3",{staticClass:"mb-0"},[t._v("Trends for "+t._s(t._f("friendlyperiod")(t.timeperiod)))]),r("b-input-group",{attrs:{size:"sm"}},[r("b-form-select",{attrs:{label:"Host",options:t.$store.getters["buckets/hosts"],placeholder:"Select a hostname"},model:{value:t.host,callback:function(e){t.host=e},expression:"host"}})],1),r("div",{staticClass:"mb-2"},[r("ul",{staticClass:"list-group list-group-horizontal-md mb-3",staticStyle:{"font-size":"0.9em",opacity:"0.7"}},[r("li",{staticClass:"list-group-item pl-0 pr-3 py-0",staticStyle:{border:"0"}},[r("b",[t._v("Host:")]),t._v(" "+t._s(t.host))])])]),r("b-alert",{staticStyle:{},attrs:{show:""}},[t._v("This feature is still in early development.")]),r("div",[r("aw-timeline-barchart",{attrs:{datasets:t.datasets,height:100}})],1),r("div",[r("hr"),r("h5",[t._v("Options")]),r("aw-devonly",[r("b-btn",{attrs:{id:"load-demo"},on:{click:t.load_demo}},[t._v("Load demo data")])],1)],1)],1)},n=[],i=r(63360),s=(r(35666),r(30381)),o=r.n(s),u=r(69409),c=r(79970);const l={name:"Trends",props:{},data:function(){var t=this.$store.state.settings.startOfDay,e=(0,u.get_today_with_offset)(t),r=7,a=o()(e).subtract(r,"days");return{today:e,timeperiod:{start:a,length:[r,"day"]}}},computed:{host:function(){return this.$route.params.host},datasets:function(){return(0,c.P)(this.$store,this.$store.state.activity.category.by_period,this.$store.state.activity.active.events,this.$store.state.categories.classes)}},mounted:function(){var t=(0,i.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$store.dispatch("categories/load"),t.next=3,this.refresh();case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{refresh:function(){var t=(0,i.Z)(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={timeperiod:this.timeperiod,host:this.host,force:e,filterAFK:this.filterAFK,includeAudible:this.includeAudible,filterCategories:this.filterCategories,dontQueryInactive:!1},t.next=3,this.$store.dispatch("activity/query_category_time_by_period",r);case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),load_demo:function(){var t=(0,i.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.data={"2021-01":1e3,"2021-02":500};case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},d=l;var h=r(1001),f=(0,h.Z)(d,a,n,!1,null,"3294fe02",null);const p=f.exports},79970:(t,e,r)=>{r.d(e,{P:()=>o});var a=r(57611),n=r(18446),i=r.n(n);r(41539),r(70189),r(78783),r(33948),r(84944),r(33792),r(21249),r(26833),r(69600),r(57327),r(74916),r(23123),r(69826),r(68309),r(96026),r(30381),r(69409);var s=r(53167);function o(t,e,r){var n=">>>",o=e;if(o){var u=new Set(Object.values(o).map((function(t){return t.cat_events.map((function(t){return t.data["$category"].join(n)}))})).flat()),c=(0,a.Z)(u).map((function(e){var a=t.getters["categories/get_category"](e.split(n));if(a){var u=Object.values(o).map((function(t){var e=t.cat_events.find((function(t){return i()(t.data["$category"],a.name)}));return e?Math.round(e.duration/3600*1e3)/1e3:null}));return{label:a.name.join(" > "),backgroundColor:(0,s.getColorFromCategory)(a,r),data:u}}console.error("missing category:",e)})).filter((function(t){return t}));return c}return[]}},57611:(t,e,r)=>{r.d(e,{Z:()=>u});r(79753);var a=r(93002);function n(t){if(Array.isArray(t))return(0,a.Z)(t)}r(82526),r(41817),r(41539),r(32165),r(78783),r(33948),r(91038);function i(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var s=r(91449);r(21703),r(96647);function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t){return n(t)||i(t)||(0,s.Z)(t)||o()}}}]);
//# sourceMappingURL=210.0ecb564b.js.map