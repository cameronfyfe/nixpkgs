"use strict";(self["webpackChunkaw_webui"]=self["webpackChunkaw_webui"]||[]).push([[575,96],{97096:(t,e,n)=>{n.r(e),n.d(e,{default:()=>m});let i={};const r={name:"fa-icon",props:{name:{type:String,validator(t){return!t||t in i||(console.warn(`Invalid prop: prop "name" is referring to an unregistered icon "${t}".\nPlease make sure you have imported this icon before using it.`),!1)}},title:String,scale:[Number,String],spin:Boolean,inverse:Boolean,pulse:Boolean,flip:{validator(t){return"horizontal"===t||"vertical"===t}},label:String,tabindex:[Number,String]},data(){return{id:o(),x:!1,y:!1,childrenWidth:0,childrenHeight:0,outerScale:1}},computed:{normalizedScale(){let t=this.scale;return t="undefined"===typeof t?1:Number(t),isNaN(t)||t<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.',this),this.outerScale):t*this.outerScale},klass(){return{"fa-icon":!0,"fa-spin":this.spin,"fa-flip-horizontal":"horizontal"===this.flip,"fa-flip-vertical":"vertical"===this.flip,"fa-inverse":this.inverse,"fa-pulse":this.pulse,[this.$options.name]:!0}},icon(){return this.name?i[this.name]:null},box(){return this.icon?`0 0 ${this.icon.width} ${this.icon.height}`:`0 0 ${this.width} ${this.height}`},ratio(){if(!this.icon)return 1;let{width:t,height:e}=this.icon;return Math.max(t,e)/16},width(){return this.childrenWidth||this.icon&&this.icon.width/this.ratio*this.normalizedScale||0},height(){return this.childrenHeight||this.icon&&this.icon.height/this.ratio*this.normalizedScale||0},style(){return 1!==this.normalizedScale&&{fontSize:this.normalizedScale+"em"}},raw(){if(!this.icon||!this.icon.raw)return null;let t=this.icon.raw,e={};return t=t.replace(/\s(?:xml:)?id=(["']?)([^"')\s]+)\1/g,((t,n,i)=>{let r=o();return e[i]=r,` id="${r}"`})),t=t.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,((t,n,i,r)=>{let a=n||r;return a&&e[a]?`#${e[a]}`:t})),t},focusable(){let{tabindex:t}=this;if(null==t)return"false";let e="string"===typeof t?parseInt(t,10):t;return e>=0?null:"false"}},mounted(){this.updateStack()},updated(){this.updateStack()},methods:{updateStack(){if(!this.name&&null!==this.name&&0===this.$children.length)return void console.warn('Invalid prop: prop "name" is required.');if(this.icon)return;let t=0,e=0;this.$children.forEach((n=>{n.outerScale=this.normalizedScale,t=Math.max(t,n.width),e=Math.max(e,n.height)})),this.childrenWidth=t,this.childrenHeight=e,this.$children.forEach((n=>{n.x=(t-n.width)/2,n.y=(e-n.height)/2}))}},render(t){if(null===this.name)return t();let e={class:this.klass,style:this.style,attrs:{role:this.$attrs.role||(this.label||this.title?"img":null),"aria-label":this.label||null,"aria-hidden":String(!(this.label||this.title)),tabindex:this.tabindex,x:this.x,y:this.y,width:this.width,height:this.height,viewBox:this.box,focusable:this.focusable}},n=`vat-${this.id}`;if(this.title&&(e.attrs["aria-labelledby"]=n),this.raw){let t=this.raw;this.title&&(t=`<title id="${n}">${l(this.title)}</title>${t}`),e.domProps={innerHTML:t}}let i=this.title?[t("title",{attrs:{id:n}},this.title)]:[];return t("svg",e,this.raw?null:i.concat(this.$slots.default||[...this.icon.paths.map(((e,n)=>t("path",{attrs:e,key:`path-${n}`}))),...this.icon.polygons.map(((e,n)=>t("polygon",{attrs:e,key:`polygon-${n}`})))]))},register(t){for(let e in t){let n=t[e],{paths:r=[],d:s,polygons:o=[],points:c}=n;s&&r.push({d:s}),c&&o.push({points:c}),i[e]=a({},n,{paths:r,polygons:o})}},icons:i};function a(t,...e){return e.forEach((e=>{for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})),t}let s=870711;function o(){return`va-${(s++).toString(16)}`}const c={"<":"&lt;",">":"&gt;",'"':"&quot;","&":"&amp;"};function l(t){return t.replace(/[<>"&]/g,(t=>c[t]||t))}const u=r;var d,h,v=n(1001),p=(0,v.Z)(u,d,h,!1,null,null,null);const m=p.exports},53344:(t,e,n)=>{n.d(e,{Z:()=>h});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{ref:"eventEditModal",attrs:{id:"edit-modal",title:"Edit event",centered:"","hide-footer":""}},[t.editedEvent?n("div",[n("table",{staticStyle:{width:"100%"}},[n("tr",[n("th",[t._v("Bucket")]),n("td",[t._v(t._s(t.bucket_id))])]),n("tr",[n("th",[t._v("ID")]),n("td",[t._v(t._s(t.event.id))])]),n("tr",[n("th",[t._v("Start")]),n("datetime",{attrs:{type:"datetime"},model:{value:t.start,callback:function(e){t.start=e},expression:"start"}})],1),n("tr",[n("th",[t._v("End")]),n("datetime",{attrs:{type:"datetime"},model:{value:t.end,callback:function(e){t.end=e},expression:"end"}})],1),n("tr",[n("th",[t._v("Duration")]),n("td",[t._v(t._s(t._f("friendlyduration")(t.editedEvent.duration)))])])]),n("hr"),n("table",{staticStyle:{width:"100%"}},[n("tr",[n("th",[t._v("Key")]),n("th",[t._v("Value")])]),t._l(t.editedEvent.data,(function(e,i){return n("tr",{key:i},[n("td",[n("b-input",{attrs:{disabled:"",value:i,size:"sm"}})],1),n("td",["boolean"===typeof t.event.data[i]?n("b-checkbox",{staticStyle:{margin:"0.25em"},model:{value:t.editedEvent.data[i],callback:function(e){t.$set(t.editedEvent.data,i,e)},expression:"editedEvent.data[k]"}}):t._e(),"string"===typeof t.event.data[i]?n("b-input",{attrs:{size:"sm"},model:{value:t.editedEvent.data[i],callback:function(e){t.$set(t.editedEvent.data,i,e)},expression:"editedEvent.data[k]"}}):t._e()],1)])}))],2),n("hr"),n("div",{staticClass:"float-left"},[n("b-button",{staticClass:"mx-1",attrs:{variant:"danger"},on:{click:function(e){t.delete_(),t.close()}}},[n("icon",{staticClass:"mx-1",attrs:{name:"trash"}}),t._v("Delete")],1)],1),n("div",{staticClass:"float-right"},[n("b-button",{staticClass:"mx-1",on:{click:t.close}},[n("icon",{staticClass:"mx-1",attrs:{name:"times"}}),t._v("Cancel")],1),n("b-button",{staticClass:"mx-1",attrs:{variant:"primary"},on:{click:function(e){t.save(),t.close()}}},[n("icon",{staticClass:"mx-1",attrs:{name:"save"}}),t._v("Save")],1)],1)]):n("div",[t._v("Loading event...")])])},r=[],a=n(63360),s=(n(35666),n(83710),n(30381)),o=n.n(s);n(14169),n(56882),n(96886);const c={name:"EventEditor",props:{event:{type:Object},bucket_id:{type:String,required:!0}},data:function(){return{editedEvent:null}},computed:{start:{get:function(){return o()(this.editedEvent.timestamp).format()},set:function(t){this.editedEvent.duration=o()(this.end).diff(t,"seconds"),this.editedEvent.timestamp=new Date(t)}},end:{get:function(){var t=o()(this.editedEvent.timestamp).add(this.editedEvent.duration,"seconds");return t.format()},set:function(t){this.editedEvent.duration=o()(t).diff(this.editedEvent.timestamp,"seconds")}}},watch:{event:function(){var t=this;return(0,a.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getEvent();case 2:case"end":return e.stop()}}),e)})))()}},mounted:function(){var t=(0,a.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getEvent();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{save:function(){var t=this;return(0,a.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$emit("save",t.editedEvent),e.next=3,t.$aw.replaceEvent(t.bucket_id,t.editedEvent);case 3:case"end":return e.stop()}}),e)})))()},delete_:function(){var t=this;return(0,a.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$emit("delete",t.event),e.next=3,t.$aw.deleteEvent(t.bucket_id,t.event.id);case 3:case"end":return e.stop()}}),e)})))()},getEvent:function(){var t=this;return(0,a.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.bucket_id&&t.event&&t.event.id)){e.next=6;break}return e.next=3,t.$aw.getEvent(t.bucket_id,t.event.id);case 3:t.editedEvent=e.sent,e.next=7;break;case 6:t.editedEvent=null;case 7:case"end":return e.stop()}}),e)})))()},close:function(){this.$refs.eventEditModal.hide(),this.$emit("close",this.event)}}},l=c;var u=n(1001),d=(0,u.Z)(l,i,r,!1,null,null,null);const h=d.exports},16575:(t,e,n)=>{n.r(e),n.d(e,{default:()=>E});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h2",[t._v("Stopwatch")]),n("p",[t._v("Using bucket: "+t._s(t.bucket_id))]),n("b-alert",{attrs:{show:""}},[t._v("This is an early experiment, an important missing feature is the ability to set start/end times manually.")]),n("b-input-group",{attrs:{size:"lg"}},[n("b-input",{attrs:{placeholder:"What are you working on?"},model:{value:t.label,callback:function(e){t.label=e},expression:"label"}}),n("b-input-group-append",[n("b-button",{attrs:{variant:"success"},on:{click:function(e){return t.startTimer(t.label)}}},[n("icon",{attrs:{name:"play"}}),t._v("Start")],1)],1)],1),n("hr"),t.loading?n("div",[n("span",{staticClass:"text-muted center"},[t._v("Loading...")])]):n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-12"},[n("h3",[t._v("Running")]),t.runningTimers.length>0?n("div",t._l(t.runningTimers,(function(e){return n("div",{key:e.id},[n("stopwatch-entry",{attrs:{event:e,bucket_id:t.bucket_id,now:t.now},on:{delete:t.removeTimer,update:t.updateTimer}}),n("hr",{staticStyle:{margin:"0"}})],1)})),0):n("div",[n("span",{staticStyle:{color:"#555"}},[t._v("No stopwatch running")]),n("hr")]),t.stoppedTimers.length>0?n("div",[n("h3",{staticClass:"mt-4 mb-4"},[t._v("History")]),t._l(Object.keys(t.timersByDate).sort().reverse(),(function(e){return n("div",[n("h5",{staticClass:"mt-2 mb-1"},[t._v(t._s(e))]),t._l(t.timersByDate[e],(function(e){return n("div",{key:e.id},[n("stopwatch-entry",{attrs:{event:e,bucket_id:t.bucket_id,now:t.now},on:{delete:t.removeTimer,update:t.updateTimer,new:function(n){return t.startTimer(e.data.label)}}}),n("hr",{staticStyle:{margin:"0"}})],1)}))],2)}))],2):n("div",[n("span",{staticStyle:{color:"#555"}},[t._v("No history to show")]),n("hr")])])])],1)},r=[],a=n(63360),s=n(7739),o=n.n(s),c=n(63105),l=n.n(c),u=(n(35666),n(32564),n(83710),n(34553),n(30381)),d=n.n(u),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"row px-3 py-2",attrs:{id:"root"}},[n("div",{staticClass:"flex-fill"},[n("span",[n("b",[t._v(t._s(t.event.data.label||"No label"))])]),n("span",{staticStyle:{color:"#888"}},[t._v(" | ")]),t.event.data.running?n("span",[t._v("Running for "),n("span",{attrs:{title:t.event.timestamp}},[t._v(t._s(t._f("friendlyduration")(t.event.data.running?(t.now-t.event.timestamp)/1e3:t.event.duration)))]),t._v("  (Started "+t._s(t._f("shorttime")(t.event.timestamp))+")")]):n("span",[t._v("Started "),n("span",{attrs:{title:t.event.timestamp}},[t._v(t._s(t._f("friendlytime")(t.event.timestamp)))]),t._v("  ("+t._s(t._f("friendlyduration")(t.event.data.running?(t.now-t.event.timestamp)/1e3:t.event.duration))+")")])]),n("div",[t.event.data.running?n("b-button",{staticClass:"mx-1",attrs:{variant:"outline-primary",size:"sm"},on:{click:t.stop}},[n("icon",{staticClass:"ml-0 mr-1",attrs:{name:"stop"}}),t._v("Stop")],1):t._e(),t.event.data.running?t._e():n("b-button",{staticClass:"mx-1",attrs:{variant:"outline-primary",size:"sm"},on:{click:function(e){return t.$emit("new")}}},[n("icon",{staticClass:"ml-0 mr-1",attrs:{name:"play"}}),t._v("Start new")],1),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"edit-modal-"+t.event.id,expression:"'edit-modal-' + event.id"}],staticClass:"mx-1",attrs:{variant:"outline-dark",size:"sm"}},[n("icon",{staticClass:"ml-0 mr-1",attrs:{name:"edit"}}),t._v("Edit")],1)],1)]),n("event-editor",{attrs:{event:t.event,bucket_id:t.bucket_id},on:{save:t.save,delete:t.delete_}})],1)},v=[],p=(n(38862),n(69959),n(97096));p["default"].register({stop:{width:448,height:512,paths:[{d:"M400 32c26.5 0 48 21.5 48 48v352c0 26.5-21.5 48-48 48h-352c-26.5 0-48-21.5-48-48v-352c0-26.5 21.5-48 48-48h352z"}]}}),p["default"].register({play:{width:448,height:512,paths:[{d:"M424.4 214.7c31.5 18.5 31.4 64.1 0 82.6l-352 208c-31.7 18.8-72.4-3.8-72.4-41.3v-416.1c0-41.8 43.8-58.2 72.4-41.3z"}]}});var m=n(53344);const f={name:"StopwatchEntry",components:{"event-editor":m.Z},props:{event:Object,bucket_id:String,now:{type:d(),default:d()()}},methods:{stop:function(){var t=(0,a.Z)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=JSON.parse(JSON.stringify(this.event)),e.data.running=!1,e.duration=(d()()-d()(e.timestamp))/1e3,t.next=5,this.$aw.replaceEvent(this.bucket_id,e);case 5:this.$emit("update",e);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),save:function(){var t=(0,a.Z)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$emit("update",e);case 1:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),delete_:function(){var t=(0,a.Z)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$emit("delete",e);case 1:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},g=f;var w=n(1001),b=(0,w.Z)(g,h,v,!1,null,"553acbf8",null);const _=b.exports;n(96886);const y={name:"Stopwatch",components:{"stopwatch-entry":_},data:function(){return{loading:!0,bucket_id:"aw-stopwatch",events:[],label:"",now:d()()}},computed:{runningTimers:function(){return l()(this.events,(function(t){return t.data.running}))},stoppedTimers:function(){return l()(this.events,(function(t){return!t.data.running}))},timersByDate:function(){return o()(this.stoppedTimers,(function(t){return d()(t.timestamp).format("YYYY-MM-DD")}))}},mounted:function(){var t=this;this.$aw.ensureBucket(this.bucket_id,"general.stopwatch","unknown"),this.getEvents(),setInterval((function(){return t.now=d()()}),1e3)},methods:{startTimer:function(){var t=(0,a.Z)(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={timestamp:new Date,data:{running:!0,label:e}},t.next=3,this.$aw.heartbeat(this.bucket_id,1,n);case 3:return t.next=5,this.getEvents();case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),updateTimer:function(){var t=(0,a.Z)(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=this.events.findIndex((function(t){return t.id==e.id})),-1!=n?this.$set(this.events,n,e):console.error(":(");case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),removeTimer:function(t){this.events=l()(this.events,(function(e){return e.id!=t.id}))},getEvents:function(){var t=(0,a.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$aw.getEvents(this.bucket_id,{limit:100});case 2:this.events=t.sent,this.loading=!1;case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},k=y;var x=(0,w.Z)(k,i,r,!1,null,"df6cbc4e",null);const E=x.exports},69959:(t,e,n)=>{var i=n(97096);i["default"].register({edit:{width:576,height:512,paths:[{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8l-218.4 218.4-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8 218.4-218.4c3.8-3.8 10-3.8 13.8 0zM564.6 60.3c15.2 15.2 15.2 39.9 0 55.2l-35.4 35.4c-3.8 3.8-10 3.8-13.8 0l-90.2-90.2c-3.8-3.8-3.8-10 0-13.8l35.4-35.4c15.3-15.2 40-15.2 55.2 0zM384 346.2c0-3.2 1.3-6.2 3.5-8.5l40-40c7.6-7.5 20.5-2.2 20.5 8.5v157.8c0 26.5-21.5 48-48 48h-352c-26.5 0-48-21.5-48-48v-352c0-26.5 21.5-48 48-48h285.8c10.7 0 16.1 12.9 8.5 20.5l-40 40c-2.3 2.2-5.3 3.5-8.5 3.5h-229.8v320h320v-101.8z"}]}})},56882:(t,e,n)=>{var i=n(97096);i["default"].register({save:{width:448,height:512,paths:[{d:"M433.9 129.9c7.8 7.8 14.1 23 14.1 33.9v268.1c0 26.5-21.5 48-48 48h-352c-26.5 0-48-21.5-48-48v-352c0-26.5 21.5-48 48-48h268.1c11 0 26.2 6.3 33.9 14.1zM224 416c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zM320 111.5c0-2.7-1.6-6.5-3.5-8.5l-3.5-3.5c-2.3-2.3-5.3-3.5-8.5-3.5h-228.5c-6.6 0-12 5.4-12 12v104c0 6.6 5.4 12 12 12h232c6.6 0 12-5.4 12-12v-100.5z"}]}})},14169:(t,e,n)=>{var i=n(97096);i["default"].register({times:{width:352,height:512,paths:[{d:"M242.7 256l100.1 100.1c12.3 12.3 12.3 32.2 0 44.5l-22.2 22.2c-12.3 12.3-32.2 12.3-44.5 0l-100.1-100.1-100.1 100.1c-12.3 12.3-32.2 12.3-44.5 0l-22.2-22.2c-12.3-12.3-12.3-32.2 0-44.5l100.1-100.1-100.1-100.1c-12.3-12.3-12.3-32.2 0-44.5l22.2-22.2c12.3-12.3 32.2-12.3 44.5 0l100.1 100.1 100.1-100.1c12.3-12.3 32.2-12.3 44.5 0l22.2 22.2c12.3 12.3 12.3 32.2 0 44.5z"}]}})},96886:(t,e,n)=>{var i=n(97096);i["default"].register({trash:{width:448,height:512,paths:[{d:"M432 32c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-416c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h120l9.4-18.7c3.6-7.3 13.1-13.3 21.3-13.3h0.1 114.3 0c8.2 0 17.8 6 21.5 13.3l9.4 18.7h120zM53.2 467l-21.2-339h384l-21.2 339c-1.6 24.8-23 45-47.9 45h-245.8c-24.9 0-46.3-20.2-47.9-45z"}]}})}}]);
//# sourceMappingURL=575.4a87b662.js.map